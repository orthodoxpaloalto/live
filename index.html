<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Streaming from Russian Orthodox Church in Palo Alto</title> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
	<meta name="viewport" content="user-scalable=no"> 
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        const apiUrl = 'https://youtube.googleapis.com/youtube/v3/playlistItems?maxResults=5&part=snippet&playlistId=PLRgAljCAPhB_0XqYtMxW86DUS_zhUJdpv&key=AIzaSyD-5PmfF_JBMkyhAII-PS-kM_T6WU7YY78';
        const loadData =((pageToken) => {
            let url = apiUrl + (pageToken ? "&pageToken=" + pageToken : "");
            $.get(url, (data) => {
                let nextPageToken = data && data.nextPageToken;
                let prevPageToken = data && data.prevPageToken;
                if (data && data.items && data.items.length > 0) {
                    data.items.forEach((e, i) => { 
                        let id =  (e && e.snippet && e.snippet.resourceId.videoId && e.snippet.resourceId.videoId) || '_';
                        let title = (e && e.snippet && e.snippet.title) || "Click here to watch live streaming";          
                        if (i === 0 && !prevPageToken) {
                            $('#currentLink').html("<a href='https://youtu.be/" + e.snippet.resourceId.videoId + "'>" + title + "</a>");
                        } else {
                            $('#previous').append('<iframe width="560" height="315" src="https://www.youtube.com/embed/' + id +
                                '" title="' + title + 
                                '" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br>');
                        }
                    });
                }
                if (nextPageToken) {
                    $('#down').show();  
                    $('#down').data("nextPageToken", nextPageToken);
                }
             });
        });
        $(document).ready(() => {
            $("#down").hide().click((e) => {
                e.preventDefault();
                loadData($('#down').data("nextPageToken"));
            });       
            loadData();
        });
    </script>
</head>
<body>
<br>
<!-- -->
<h1 id="currentLink">
   LOADING...
</h1>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="2GET9D48GUG72" />
<input type="image" src="https://tncs.org/wp-content/uploads/PayPal-Donate-Button-Transparent.png" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>
<hr>


<div><a href="https://docs.google.com/spreadsheets/d/1EsWccSoZigCBHbP3ANYbQ6_8cWneCMohSswREzziitk/edit?usp=sharing" target="_blank">
Confession and Communion list</a></div>
<br>

<ul id="previous"> </ul>

<a id="down" href="#"><img alt="" border="0" src="down-arrow.png" height="80"/></a>


</body>
</html>
